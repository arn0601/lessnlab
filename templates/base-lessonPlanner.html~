{% load staticfiles %}
{% load dictionary_extras %}
<!DOCTYPE html>
<html>
  <head>
    <title>LessnLab - Home</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap -->
		<link href="/static/bootstrap.css" rel="stylesheet" media="screen">
		<link href="/static/styles.css" rel="stylesheet" media="screen">
		<link rel="stylesheet" href="http://blueimp.github.com/cdn/css/bootstrap.min.css">
		<link rel="stylesheet" href="/static/bootstrap-image-gallery.css">	
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
		<script src="/static/bootstrap.js"></script>
		<script type="text/javascript"> <!-- scroll jquery -->
			function goToByScroll(id){
	 			$('html,body').animate({scrollTop: $("#"+id).offset().top - 100},1500);
		}
		</script>
  </head>

  <body style="padding-top:40px; padding-bottom:50px;">
		<div style="height: 100%">
			{% include "navbar.html" %}
			<div class="row-fluid" style="">
				<div class="span2 rightunitbox" id="leftnav">
					<ul class="nav nav-pills nav-stacked" id="navbar">
						<li><a href="javascript:void(0)" onClick="goToByScroll('overview')">Overview</a></li>
						{% for section, content_list in sections.items %}
				 		{% with section.name as user_key %}
							<li><a href="javascript:void(0)" onClick="goToByScroll('{{ section.id }}')">
								{{ section_types|access:user_key }}  -  {{ section.description }}
						 </a></li>
	 					{% endwith %}
						{% endfor %}
					</ul>
					<a class="btn btn-primary btn-small" type="button" href="#addSection" data-toggle="modal">Add Section</a>
				</div>
				<div class="span10 leftunitbox" id="content" style="margin-left: 0px;">
	      	{% block content %}{% endblock %}
				</div>
			</div>
			{% include "footer.html" %}
			{% include "modals.html" %}
		</div>
	</body>
<!-- Javascript -->
<script>

form_count = $("[name=extra_field_count]").val();

	$("#addMC").click (function(){
		var form = document.getElementsByName("c_Assessment");
		form.append('<input type=text / >');
		alert("Add mc");
	});


	$("#addFR").click (function(){
		var form = document.getElementsByName("c_Assessment");

		var label,label2,div,textbox,answerbox;
		label = document.createElement('label');
		label.className ="control-label";
		label2 = document.createElement('label');
		label.className ="control-label";
		label.appendChild(document.createTextNode('Question: '));
		label2.appendChild(document.createTextNode('Answer:'));

		textbox = document.createElement('input');
		textbox.name = 'extra_field_' + form_count;
		form_count ++; 
	
		answerbox = document.createElement('textarea');
		answerbox.name = 'extra_field_' + form_count;
		form_count ++; 

		div = document.createElement('div');
		textbox.type = 'text';		

  		var reper = document.getElementById('addFR');
 	 	var parinte = reper.parentNode;

  		parinte.insertBefore(label, reper);
		parinte.insertBefore(textbox, reper);
		parinte.insertBefore(label2, reper);
		parinte.insertBefore(answerbox, reper);
		parinte.insertBefore(div, reper);		
		
    		$("[name=extra_field_count]").val(form_count);

	});

	   $(".content_show").click(function(){ // Click to only happen on announce links 
		var sid = $(this).data('sectionid'); 
		var ct = $(this).data('contenttype'); 
	     	var x=document.getElementsByTagName("form");
		for(var i=0;i<x.length;i++)
		{
			var name = x[i].attributes["name"].value;
			if(name.indexOf("c_") === 0)
		      	{
				if(name.indexOf(ct) !== -1)
				{			
					x[i].section_id.value=sid
					
			  	}
			}
		}

		$('#addContent'+ct).modal('show');
	   });


	$(".delete_section").click(function(){ // Click to only happen on announce links 
		
		var sid = $(this).data('sectionid');
		var x=document.getElementsByTagName("form");
		for(var i=0;i<x.length;i++)
                {
                        var name = x[i].attributes["name"].value;
                        if(name.indexOf("deleteSection") === 0)
                        {	
                            x[i].section_id.value=sid               
                        }
                }
                $('#deleteSection').modal('show');
	});
	$(".delete_content").click(function(){ // Click to only happen on announce links 
		var cid = $(this).data('contentid');
		var x=document.getElementsByTagName("form");
		
		for(var i=0;i<x.length;i++)
                {
                        var name = x[i].attributes["name"].value;
                        if(name.indexOf("deleteContent") === 0)
                        {
                            x[i].content_id.value=cid             
                        }
                }
                $('#deleteContent').modal('show');
	});
	</script>

</html>
