{% load staticfiles %}
{% load dictionary_extras %}
<!DOCTYPE html>
<html>
  <head>
    <title>LessnLab - Home</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap -->
    <link href="/static/bootstrap.css" rel="stylesheet" media="screen">
	<link href="/static/styles.css" rel="stylesheet" media="screen">		 	 
	</style>
	<script type="text/javascript"> <!-- scroll jquery -->
		function goToByScroll(id){
 			$('html,body').animate({scrollTop: $("#"+id).offset().top},1000);
	}
	</script>
	
  </head>
  <body style="padding-top:40px;">
  <div class="navbar navbar-fixed-top navcolor">
    <div class="navbar-inner">
  	   <div class="row-fluid">
		  	<div class="span2">
		  	<ul class="nav">
		  		<li class="dropdown">  
      				 	 <a href="#"  
          				 class="dropdown-toggle"  
          				 data-toggle="dropdown">  
          				 <i class="icon-user"></i> {{ fullname }}
          				 <b class="caret"></b>  
      					 </a>  
		     			<ul class="dropdown-menu">
		      				<li><a href="#">Profile</a></li> 
							<li><a href="#">Network</a></li>
		      				<li><a href="#">Settings</a></li>
		      				<li><a href="#">Logout</a></li>
		    			</ul> 
   				</li>
   			</ul>
   			</div>
			<div class="span10">
		  		<ul class="nav pull-left">
				<li class="dropdown">  
      				 	 <a href="#"  
          				 class="dropdown-toggle"  
          				 data-toggle="dropdown"><b class="caret"></b> 

					{% if course %}
						{{ course.subject }}
					{% else %}
						Current Course
					{% endif %}
      					 </a>  
	     				<ul class="dropdown-menu">
					{% for course in userCourses %}  
						<li><a href="/units/?course_id={{ course.id }}">{{ course.subject }}</a></li>
					{% endfor %}

	      				<li><a href="#addCourse" data-toggle="modal"><i class="icon-plus"></i> Add Course</a></li>
	    				</ul>  
 				</li>


				{% if course %}
   				<li><a class="#"> <i class="icon-chevron-right"></i> </a>
   					 <li class="dropdown">  
	      				 	 <a href="#" class="dropdown-toggle" data-toggle="dropdown"><b class="caret"></b>
						{% if unit %}
							{{ unit.name }}
						{% else %}
							Current Unit
						{% endif %} 
						</a>  
		     				<ul class="dropdown-menu">
							{% for unit in userUnits %}  
								<li><a href="/lessons/?unit_id={{ unit.id }}">{{ unit.name }}</a></li>
							{% endfor %}

			      				<li><a href="#addUnit" data-toggle="modal">
							<i class="icon-plus"></i> Add Unit</a></li>
		    				</ul> 
				 
   					</li>
				</li>
				{% endif %}
				{% if unit %}
				   					  
					 <li><a class="#"> <i class="icon-chevron-right"></i> </a>
					 <li class="dropdown">  
					 	 <a href="#"  
		  				 class="dropdown-toggle"  
		  				 data-toggle="dropdown"><b class="caret"></b>
						{% if lesson %}
							{{ lesson.name }}
						{% else %}
							Current Lesson
						{% endif %}
						 </a>  
			     			<ul class="dropdown-menu">
							{% for lesson in userLessons %}  
								<li><a href="/lessonPlanner/?lesson_id={{ lesson.id }}">{{ lesson.name }}</a></li>
							{% endfor %}
			      				<li><a href="#addLesson" data-toggle="modal"><i class="icon-plus"></i> Add Lesson</a></li>
			    			</ul>  
	   				</li>
	
				{% endif %}


   				</ul>
		 </div>	
			
	</div>
</div>
</div>

<div class="container-fluid">
<div class="row-fluid">
	<div class="span2 leftnav leftmenu">
		<ul class="nav nav-pills nav-stacked" id="navbar">
			<li><a href="javascript:void(0)" onClick="goToByScroll('overview')">Overview</a></li>
			{% for section, content_list in sections.items %}
			 {% with section.name as user_key %}
  				<li><a href="javascript:void(0)" onClick="goToByScroll('{{ section.name }}_{{ section.placement }}')">{{ section_types|access:user_key }} </a></li>

			
    			
 			{% endwith %}
			{% endfor %}

		</ul>
		<a class="btn btn-primary btn-small" type="button" href="#addSection" data-toggle="modal">Add Section</a>
	</div>
</div>

<div class="row-fluid">
	<div class="span2">
	</div>
	
        {% block content %}{% endblock %}
	
	</div>
</div>
<!-- Footer -->
<div class="row-fluid footer">
		<div class="row-fluid" style="text-align:center; height: 50px; padding-bottom: 20px; background-color:#efefef; vertical-align: middle;">
			<small><p style="padding-top: 10px;">Created by <a href="#">LessnLab Inc.</a>, Copyright 2013. All Rights Reserved.</p></small>
		</div>
</div>

 {% for header,nested in section_content_forms.items  %}
 {% for type,contentAddForm in nested.items %}
<div class="modal hide" id="addContent{{ type }}">
	<div class="modal-header">
		<button type="button" class="close" data-dismiss="modal">x</button>
	    	<h3>Add Content - {{ type }} </h3>
	 </div>
	 <div class="modal-body">
		<div>
    		<form id="content_form" method="post" action="{% url LessonPlanner.views.addContent %}" name="c_{{ type }}">
		{% csrf_token %}
			{% for field in contentAddForm %}
		 	<div class="control-group">
			{{ field.errors.as_text }}
				<label class="control-label">{{ field.label_tag }}</label>
			    	<div class="controls">
				{{ field }}
			    	</div>
			 </div>
			 {% endfor %}
			
		     	<p><button type="submit" class="btn btn-primary">Submit</button>
				<button type="button" data-dismiss="modal" class="btn btn-primary">Cancel</button>
			</p>
		</form>
  		</div>
	</div>
</div>
{% endfor %}
{% endfor %}






<div class="modal hide" id="addSection">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal">x</button>
    <h3>Add a Lesson</h3>
  </div>
  <div class="modal-body">
    <form method="post" action="{% url LessonPlanner.views.addSection %}" name="login_form">
        {% csrf_token %}
        {% for field in sectionAddForm %}
        <div class="control-group">
        {{ field.errors.as_text }}
         <label class="control-label">{{ field.label_tag }}</label>
            <div class="controls">
                {{ field }}
            </div>
                </div>
    {% endfor %}
     <p><button type="submit" class="btn btn-primary">Submit</button>
                <button type="button" data-dismiss="modal" class="btn btn-primary">Cancel</button>
<!--Department,Subject,Year-->
      </p>
    </form>
  </div>
</div>


<div class="modal hide" id="addLesson">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal">x</button>
    <h3>Add a Lesson</h3>
  </div>
  <div class="modal-body">
    <form method="post" action="{% url LessonPlanner.views.addLesson %}" name="login_form">
        {% csrf_token %}
        {% for field in lessonAddForm %}
        <div class="control-group">
        {{ field.errors.as_text }}
         <label class="control-label">{{ field.label_tag }}</label>
            <div class="controls">
                {{ field }}
            </div>
                </div>
    {% endfor %}
     <p><button type="submit" class="btn btn-primary">Submit</button>
                <button type="button" data-dismiss="modal" class="btn btn-primary">Cancel</button>
<!--Department,Subject,Year-->
      </p>
    </form>
  </div>
</div>



<div class="modal hide" id="addUnit">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal">x</button>
    <h3>Add a Unit</h3>
  </div>
  <div class="modal-body">
    <form method="post" action="{% url LessonPlanner.views.addUnit %}" name="login_form">
        {% csrf_token %}
        {% for field in unitAddForm %}
        <div class="control-group">
        {{ field.errors.as_text }}
         <label class="control-label">{{ field.label_tag }}</label>
            <div class="controls">
		{{ field }}
            </div>
                </div>
    {% endfor %}
     <p><button type="submit" class="btn btn-primary">Submit</button>
                <button type="button" data-dismiss="modal" class="btn btn-primary">Cancel</button>
<!--Department,Subject,Year-->
      </p>
    </form>
  </div>
</div>

<div class="modal hide" id="addCourse">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal">x</button>
    <h3>Add a course</h3>
  </div>
  <div class="modal-body">
    <form method="post" action="{% url LessonPlanner.views.addCourse %}" name="login_form">
	{% csrf_token %}
	{% for field in courseAddForm %}
        <div class="control-group">
        {{ field.errors.as_text }}
         <label class="control-label">{{ field.label_tag }}</label>
            <div class="controls">
                {{ field }}
            </div>
   		</div>
    {% endfor %}
     <p><button type="submit" class="btn btn-primary">Submit</button>
		<button type="button" data-dismiss="modal" class="btn btn-primary">Cancel</button>
<!--Department,Subject,Year-->
      </p>
    </form>
  </div>
</div>
</body>
<!-- Javascript -->
    <script src="http://code.jquery.com/jquery.js"></script>
    <script src="/static/bootstrap.js"></script>
	<script>
	
	   $(".content_show").click(function(){ // Click to only happen on announce links 
		var sid = $(this).data('sectionid'); 
		var ct = $(this).data('contenttype'); 
	     	var x=document.getElementsByTagName("form");
		for(var i=0;i<x.length;i++)
		{
			var name = x[i].attributes["name"].value;
			if(name.indexOf("c_") === 0)
		      	{
				var parentDiv = x[i].parentNode;
			  	parentDiv.style.cssText = "display:none";
				if(name.indexOf(ct) !== -1)
				{			
					x[i].section_id.value=sid
					parentDiv.style.cssText="";
	//				    $("<input type='hidden' / >")
	//				     .attr("id", "section_id")
	//				     .attr("name", "section_id")
	//				     .attr("value", sid)
	//				     .appendTo(x);
			  	}
			}
		}
		$('#addContent'+ct).modal('show');
	   });

	</script>

</html>
